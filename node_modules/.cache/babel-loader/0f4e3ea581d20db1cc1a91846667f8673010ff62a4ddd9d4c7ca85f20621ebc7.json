{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\wisse\\\\Asp.netReact_Training\\\\test1\\\\qAndA\\\\frontend\\\\src\\\\Auth.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React from \"react\";\nimport { createAuth0Client } from \"@auth0/auth0-spa-js\";\nimport { authSettings } from \"./AppSettings\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Auth0Context = /*#__PURE__*/React.createContext({\n  isAuthenticated: false,\n  signIn: () => {},\n  signOut: () => {},\n  loading: true\n});\nexport const useAuth = () => {\n  _s();\n  return React.useContext(Auth0Context);\n};\n_s(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport const AuthProvider = props => {\n  _s2();\n  const [isAuthenticated, setIsAuthenticated] = React.useState(false);\n  const [user, setUser] = React.useState(undefined);\n  const [auth0Client, setAuth0Client] = React.useState();\n  const [loading, setLoading] = React.useState(true);\n  React.useEffect(() => {\n    const initAuth0 = async () => {\n      setLoading(true);\n      const auth0FromHook = await createAuth0Client(authSettings);\n      setAuth0Client(auth0FromHook);\n      if (window.location.pathname === \"/signin-callback\" && window.location.search.indexOf(\"code=\") > -1) {\n        await auth0FromHook.handleRedirectCallback();\n        window.location.replace(window.location.origin);\n      }\n      const isAuthenticatedFromHook = await auth0FromHook.isAuthenticated();\n      if (isAuthenticatedFromHook) {\n        const user = await auth0FromHook.getUser();\n        setUser(user);\n      }\n      setIsAuthenticated(isAuthenticatedFromHook);\n      setLoading(false);\n    };\n    initAuth0();\n  }, []);\n  const getAuth0ClientFromState = () => {\n    if (auth0Client === undefined) {\n      throw new Error(\"Auth0 client not set\");\n    }\n    return auth0Client;\n  };\n  return /*#__PURE__*/_jsxDEV(Auth0Context.Provider, {\n    value: {\n      isAuthenticated,\n      user,\n      signIn: () => getAuth0ClientFromState().loginWithRedirect(),\n      signOut: () => getAuth0ClientFromState().logout({\n        clientId: authSettings.clientId,\n        logoutParams: {\n          returnTo: window.location.origin + \"/signout-callback\"\n        }\n      }),\n      loading\n    },\n    children: Props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 9\n  }, this);\n};\n_s2(AuthProvider, \"YWOQTfsIVtMYNV79ee0Ed4dzLAs=\");\n_c = AuthProvider;\nexport const getAccessToken = async () => {\n  const auth0FromHook = await createAuth0Client(authSettings);\n  const accessToken = await auth0FromHook.getTokenSilently();\n  return accessToken;\n};\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","createAuth0Client","authSettings","Auth0Context","createContext","isAuthenticated","signIn","signOut","loading","useAuth","useContext","AuthProvider","props","setIsAuthenticated","useState","user","setUser","undefined","auth0Client","setAuth0Client","setLoading","useEffect","initAuth0","auth0FromHook","window","location","pathname","search","indexOf","handleRedirectCallback","replace","origin","isAuthenticatedFromHook","getUser","getAuth0ClientFromState","Error","loginWithRedirect","logout","clientId","logoutParams","returnTo","Props","children","getAccessToken","accessToken","getTokenSilently"],"sources":["C:/Users/wisse/Asp.netReact_Training/test1/qAndA/frontend/src/Auth.tsx"],"sourcesContent":["import React from \"react\";\r\nimport { Auth0Client } from \"@auth0/auth0-spa-js\";\r\nimport { createAuth0Client } from \"@auth0/auth0-spa-js\";\r\nimport { authSettings } from \"./AppSettings\";\r\n\r\ninterface Auth0User {\r\n    name?: string;\r\n    email?: string;\r\n}\r\ninterface IAuth0Context {\r\n    isAuthenticated: boolean;\r\n    user?: Auth0User;\r\n    signIn: () => void;\r\n    signOut: () => void;\r\n    loading: boolean;\r\n}\r\nexport const Auth0Context = React.createContext<IAuth0Context>({\r\n    isAuthenticated: false,\r\n    signIn: () => {},\r\n    signOut: () => {},\r\n    loading: true,\r\n});\r\n\r\ntype Props = {\r\n    children: React.ReactNode;\r\n};\r\n\r\nexport const useAuth = () => React.useContext(Auth0Context);\r\n\r\nexport const AuthProvider = (props: Props) => {\r\n    const [isAuthenticated, setIsAuthenticated] =\r\n        React.useState<boolean>(false);\r\n    const [user, setUser] = React.useState<Auth0User | undefined>(undefined);\r\n    const [auth0Client, setAuth0Client] = React.useState<Auth0Client>();\r\n    const [loading, setLoading] = React.useState<boolean>(true);\r\n\r\n    React.useEffect(() => {\r\n        const initAuth0 = async () => {\r\n            setLoading(true);\r\n            const auth0FromHook = await createAuth0Client(authSettings);\r\n            setAuth0Client(auth0FromHook);\r\n\r\n            if (\r\n                window.location.pathname === \"/signin-callback\" &&\r\n                window.location.search.indexOf(\"code=\") > -1\r\n            ) {\r\n                await auth0FromHook.handleRedirectCallback();\r\n                window.location.replace(window.location.origin);\r\n            }\r\n\r\n            const isAuthenticatedFromHook =\r\n                await auth0FromHook.isAuthenticated();\r\n            if (isAuthenticatedFromHook) {\r\n                const user = await auth0FromHook.getUser();\r\n                setUser(user);\r\n            }\r\n            setIsAuthenticated(isAuthenticatedFromHook);\r\n            setLoading(false);\r\n        };\r\n        initAuth0();\r\n    }, []);\r\n\r\n    const getAuth0ClientFromState = () => {\r\n        if (auth0Client === undefined) {\r\n            throw new Error(\"Auth0 client not set\");\r\n        }\r\n        return auth0Client;\r\n    };\r\n\r\n    return (\r\n        <Auth0Context.Provider\r\n            value={{\r\n                isAuthenticated,\r\n                user,\r\n                signIn: () => getAuth0ClientFromState().loginWithRedirect(),\r\n                signOut: () =>\r\n                    getAuth0ClientFromState().logout({\r\n                        clientId: authSettings.clientId,\r\n                        logoutParams: {\r\n                            returnTo:\r\n                                window.location.origin + \"/signout-callback\",\r\n                        },\r\n                    }),\r\n                loading,\r\n            }}\r\n        >\r\n            {Props.children}\r\n        </Auth0Context.Provider>\r\n    );\r\n};\r\n\r\nexport const getAccessToken = async () => {\r\n    const auth0FromHook = await createAuth0Client(authSettings);\r\n    const accessToken = await auth0FromHook.getTokenSilently();\r\n    return accessToken;\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}